<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Fireman by Urethramancer</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/Urethramancer/fireman">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/Urethramancer/fireman/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/Urethramancer/fireman/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Fireman</h1>
          <p>A command-line tool to access Openfire&#39;s User Service plugin via REST API.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/Urethramancer">Urethramancer</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a id="fireman-" class="anchor" href="#fireman-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fireman <a href="https://travis-ci.org/Urethramancer/fireman"><img src="https://travis-ci.org/Urethramancer/fireman.svg?branch=master" alt="Build Status"></a>
</h1>

<p>This is a simple little Go tool I made to manage users on my Openfire server. It's derived from a server tool I made to reset passwords,
but will do a bit more when finished.</p>

<h2>
<a id="supported-systems" class="anchor" href="#supported-systems" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported systems</h2>

<p>Any Unix-like system which Go runs on is going to run well. The only ones recognised at the moment are FreeBSD, Linux and OS X.
Windows is most likely going to work if somebody writes the setup code (initialising paths for config, mainly), and other
operating systems just need a keyword to test for.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>List all users</li>
<li>List complete users (no vital details missing)</li>
<li>List incomplete users (currently users without e-mail set)</li>
<li>Set full name, e-mail or password for individual users</li>
<li>Add/remove individual users</li>
<li>Add/remove users in bulk, with password generation</li>
</ul>

<h3>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h3>

<ul>
<li>E-mail the owners of new accounts when bulk creating</li>
</ul>

<h2>
<a id="building" class="anchor" href="#building" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building</h2>

<p>Packages required:</p>

<ul>
<li>code.google.com/p/gcfg</li>
<li>code.google.com/p/getopt</li>
</ul>

<p>Currently developed with Go 1.4, so don't bet on it staying compatible with older versions.</p>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h2>

<p>The config file is a simple INI-style file with one section, containing two entries. If it's missing it will be created on first run.
To see the location it uses, run Fireman like this:</p>

<div class="highlight highlight-sh"><pre>fireman -v</pre></div>

<p>Default config:</p>

<div class="highlight highlight-ini"><pre><span class="pl-en">[main]</span>
<span class="pl-k">server</span> = http://localhost:9090/plugins/userService/
<span class="pl-k">key</span> = &lt;key&gt;</pre></div>

<p>Fireman is meant to run on the same server that Openfire is installed on, but you can add other IP addresses to its whitelist if you
need to run Fireman from other locations.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Running it without arguments or with the -h flag will show all available flags.</p>

<p>List all users:</p>

<div class="highlight highlight-sh"><pre>fireman -l</pre></div>

<p>List only "complete" users (users with e-mail set):</p>

<div class="highlight highlight-sh"><pre>fireman -c</pre></div>

<p>List users with missing e-mail:</p>

<div class="highlight highlight-sh"><pre>fireman -i</pre></div>

<p>E-mail isn't required by dedault when registering users with Openfire, so this lets you filter those out in case you want to do
anything to them later.</p>

<p>Set e-mail:</p>

<div class="highlight highlight-sh"><pre>fireman -u <span class="pl-k">&lt;</span>username<span class="pl-k">&gt;</span> -m <span class="pl-k">&lt;</span>e-mail<span class="pl-k">&gt;</span></pre></div>

<p>Set password:</p>

<div class="highlight highlight-sh"><pre>fireman -u <span class="pl-k">&lt;</span>username<span class="pl-k">&gt;</span> -p <span class="pl-k">&lt;</span>password<span class="pl-k">&gt;</span></pre></div>

<p>All user-edit flags can also be combined to set everything at once:</p>

<div class="highlight highlight-sh"><pre>fireman -u <span class="pl-k">&lt;</span>username<span class="pl-k">&gt;</span> -n <span class="pl-k">&lt;</span>full name<span class="pl-k">&gt;</span> -m <span class="pl-k">&lt;</span>e-mail<span class="pl-k">&gt;</span> -p <span class="pl-k">&lt;</span>password<span class="pl-k">&gt;</span></pre></div>

<p>Add a user (all fields except username are optional):</p>

<div class="highlight highlight-sh"><pre>fireman -a <span class="pl-k">&lt;</span>username<span class="pl-k">&gt;</span> -n <span class="pl-k">&lt;</span>full name<span class="pl-k">&gt;</span> -m <span class="pl-k">&lt;</span>e-mail<span class="pl-k">&gt;</span> -p <span class="pl-k">&lt;</span>password<span class="pl-k">&gt;</span></pre></div>

<p>Delete a user:</p>

<div class="highlight highlight-sh"><pre>fireman -d <span class="pl-k">&lt;</span>username<span class="pl-k">&gt;</span></pre></div>

<h2>
<a id="bulk-operations" class="anchor" href="#bulk-operations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bulk operations</h2>

<p>To add many users at once from a list, first make a comma-separated file with username, full name and e-mail.
Example:</p>

<pre><code>one,One,one@example.com
two,Two,two@example.com
three,Three,three@example.com
</code></pre>

<p>Then run the program like this:</p>

<div class="highlight highlight-sh"><pre>fireman -A <span class="pl-k">&lt;</span>filename<span class="pl-k">&gt;</span></pre></div>

<p>To delete users, simple make a list of usernames, one per line. Then run:</p>

<div class="highlight highlight-sh"><pre>fireman -D <span class="pl-k">&lt;</span>filename<span class="pl-k">&gt;</span></pre></div>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-3829418-9");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>